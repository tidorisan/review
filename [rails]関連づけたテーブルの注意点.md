---
title: "[rails]関連づけたテーブルの注意点"
tags: ""
---

## [テーブルの整理(各テーブルのレコードの整理)・別テーブルやカラムに対しての考え方]

-   #### 「繰り返し項目を削除する」そのカラムがアクターのアクションによって増えるか
    [特に、毎回増加するか（会員のテーブルは増加するが頻度は高くない。投稿については利用者の悪所によって毎度作成される）]、増加する場合は別テーブルにしてそちらを子テーブル、切り離した元のテーブルを親テーブルと考える。

-   #### 「外部キーで置き換える」関連づけた場合どちらかに影響してもシステムの使用上問題がないか考慮する。

    [注文テーブルなどは注文した後に関連づけたテーブルでの値の変化を受け付けたくないので、カラムを別テーブルに分けず自分のテーブルにカラムを作成する][ユーザーテーブルなどは会員情報・名前などの変更が後から存在する可能性があるので別テーブルに行う]

    -   登録した情報を修正するか

    -   頻度は高くないが増えるか[会員登録などで]

        \-　同姓同名を区別したいか


-   #### 「マスタ項目を分割する」

-   そのカラムの情報はある程度決まったパターンのみか

-   そのパターンをあとで追加・修正する可能性があるか

-   パターンがレコードごとにわかりやすい形で表したいか

[商品のジャンルは、ある程度決まっており追加修正の可能性がある]

### [注意]

関連づけたテーブルから値を持ってくる場合

-   どっちかが消えると消える

-   どっちかのdateが変更すると引っ張ってくるほうも変化する

その２点でテーブルやカラムをチェックしてそれで良いか確かめる

新規登録する際に

別テーブルからdateを引っ張ってくる

＝＞

①　どっちかが消えると消える

②　どっちかのdateが変更すると引っ張ってくるほうも変化する

＝＞

注文「table　dbに保存する」→　きっちり形を残す　紙に描いて残すイメージ

viewなどでそのテーブルでカラムを記載する
